import{j as e,r as m,R as D,L}from"./index-a-kiUjCp.js";function T(l){try{const t=new URL(l);if(t.hostname==="youtu.be"){let r=`https://www.youtube.com/embed/${t.pathname.slice(1)}`;return t.search&&(r+=t.search),r}if(t.hostname.includes("youtube.com")){const a=t.searchParams,r=a.get("v");if(r){let n=`https://www.youtube.com/embed/${r}`;const i=[];return a.get("t")&&i.push(`start=${a.get("t").replace("s","")}`),a.get("si")&&i.push(`si=${a.get("si")}`),i.length&&(n+="?"+i.join("&")),n}}return l}catch{return l}}function $({title:l,date:t,author:a,content:r,images:n,videos:i,onImageClick:g}){return e.jsxs("article",{className:"homepage-post",children:[e.jsx("div",{className:"homepage-post-title",children:l}),e.jsxs("div",{className:"homepage-post-meta",children:[t," · ",a]}),e.jsx("div",{className:"homepage-post-content",children:r}),n&&n.length>0&&e.jsx("div",{className:"homepage-post-media",children:n.map((p,h)=>e.jsx("img",{src:p,alt:l+" "+(h+1),className:"homepage-post-image",onClick:()=>g(p),style:{cursor:"pointer"}},h))}),i&&i.length>0&&e.jsx("div",{className:"homepage-post-media",children:i.map((p,h)=>e.jsx("div",{className:"homepage-post-video-wrapper",children:e.jsx("iframe",{src:T(p),title:l+" video "+(h+1),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"homepage-post-video"})},h))})]})}function Y(){const[l,t]=m.useState(!1),[a,r]=m.useState(!1),[n,i]=m.useState(null),[g,p]=m.useState([]),[h,v]=m.useState(!0),[u,N]=m.useState(""),[w,C]=m.useState(5),[x,b]=m.useState(null),[S,f]=D.useState(""),j=a?{brand:"द व्यांस",about:"परिचय",contact:"संपर्क",login:"लॉगिन"}:{brand:"The Vyans",about:"About",contact:"Contact",login:"Login"},E=a?"संपर्क करें":"Contact Us",F=a?`© ${new Date().getFullYear()} द व्यांस. सर्वाधिकार सुरक्षित.`:`© ${new Date().getFullYear()} The Vyans. All rights reserved.`;m.useEffect(()=>{async function s(){v(!0),N("");try{const[c,d]=await Promise.all([fetch("https://thevyans.politebeach-89ca2b50.centralindia.azurecontainerapps.io/about"),fetch("https://thevyans.politebeach-89ca2b50.centralindia.azurecontainerapps.io/posts")]),o=await c.json(),k=await d.json();if(!c.ok)throw new Error(o.message||"Failed to fetch about");if(!d.ok)throw new Error(k.message||"Failed to fetch posts");i(o),p(k.sort((P,U)=>U._id.localeCompare(P._id)))}catch(c){N(c.message)}finally{v(!1)}}s()},[]);function y(){return e.jsxs("div",{className:"skeleton-fallback",children:[e.jsx("div",{className:"skeleton-header"}),e.jsx("div",{className:"skeleton-section"})]})}const R=async s=>{s.preventDefault(),f("Sending....");const c=new FormData(s.target);c.append("access_key","1634c43e-a896-4ee8-9af5-b72dd512d366");const o=await(await fetch("https://api.web3forms.com/submit",{method:"POST",body:c})).json();o.success?(f(a?"संपर्क करने के लिए धन्यवाद|":"Thank you for Contacting."),s.target.reset()):(console.log("Error",o),f(o.message))};return e.jsxs("div",{className:"homepage-container",children:[e.jsxs("nav",{className:"homepage-nav",children:[e.jsx("div",{className:"homepage-brand",children:j.brand}),e.jsxs("div",{className:"homepage-nav-actions",children:[e.jsx("button",{className:"homepage-lang-btn",onClick:()=>r(s=>!s),children:a?"English":"हिन्दी"}),e.jsx("button",{className:"homepage-hamburger","aria-label":"Toggle navigation",onClick:()=>t(!l),children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",children:[e.jsx("rect",{y:"6",width:"28",height:"3",rx:"1.5",fill:"#fff"}),e.jsx("rect",{y:"13",width:"28",height:"3",rx:"1.5",fill:"#fff"}),e.jsx("rect",{y:"20",width:"28",height:"3",rx:"1.5",fill:"#fff"})]})})]}),e.jsxs("div",{className:`homepage-nav-links${l?" open":""}`,children:[e.jsx("a",{href:"#about",className:"homepage-nav-link",onClick:()=>t(!1),children:j.about}),e.jsx("a",{href:"#contact",className:"homepage-nav-link",onClick:()=>t(!1),children:j.contact}),e.jsx(L,{to:"/login",className:"homepage-nav-link",onClick:()=>t(!1),children:j.login})]})]}),e.jsx("section",{id:"about",className:"homepage-about-section",children:h?e.jsx(y,{}):u?e.jsx("div",{style:{color:"red"},children:u}):n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.image,alt:"Profile",className:"homepage-about-img"}),e.jsxs("div",{className:"homepage-about-text",children:[e.jsx("h2",{children:a?"परिचय":"About Us"}),e.jsx("p",{children:a?n.hindiContent:n.englishContent})]})]}):null}),e.jsx("section",{id:"posts",className:"homepage-posts",children:h?e.jsx(y,{}):u?e.jsx("div",{style:{color:"red"},children:u}):g.length>0?e.jsxs(e.Fragment,{children:[g.slice(0,w).map((s,c)=>e.jsx($,{title:s.title,date:s.date,author:s.author,content:s.content,images:s.images,videos:s.videos,onImageClick:d=>b(d)},s._id||c)),w<g.length&&e.jsx("button",{className:"homepage-more-posts-btn",onClick:()=>C(s=>s+5),style:{display:"block"},children:a?"और पोस्ट्स":"More Posts"})]}):e.jsx("div",{children:"No posts found."})}),x&&e.jsx("div",{className:"homepage-img-modal",onClick:()=>b(null),children:e.jsxs("div",{className:"homepage-img-modal-content",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:x,alt:"Fullscreen",className:"homepage-img-modal-img"}),e.jsx("button",{className:"homepage-img-modal-download",onClick:async()=>{try{const c=await(await fetch(x,{mode:"cors"})).blob(),d=window.URL.createObjectURL(c),o=document.createElement("a");o.href=d,o.download=x.split("/").pop()||"image.jpg",document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(d)}catch{alert("Failed to download image.")}},children:a?"डाउनलोड करें":"Download"}),e.jsx("button",{className:"homepage-img-modal-close",onClick:()=>b(null),children:"×"})]})}),e.jsxs("section",{id:"contact",className:"homepage-contact",children:[e.jsx("div",{className:"homepage-contact-title",children:E}),e.jsxs("form",{className:"homepage-contact-form",onSubmit:R,children:[e.jsx("input",{type:"text",placeholder:a?"आपका नाम":"Your Name",className:"homepage-input",required:!0}),e.jsx("input",{type:"email",placeholder:a?"आपका ईमेल":"Your Email",className:"homepage-input"}),e.jsx("textarea",{placeholder:a?"आपका संदेश":"Your Message",className:"homepage-input homepage-textarea",required:!0}),e.jsx("button",{type:"submit",className:"homepage-button",children:a?"संदेश भेजें":"Send Message"})]}),e.jsx("span",{children:S}),e.jsxs("div",{className:"homepage-contact-links-row",children:[e.jsxs("a",{href:"tel:+918299365307",className:"homepage-contact-link-row",children:[e.jsx("span",{className:"homepage-contact-link-label",children:a?"फोन:":"Phone:"}),"+91-8299365307"]}),e.jsxs("a",{href:"mailto:vyansgroup@gmail.com",className:"homepage-contact-link-row",children:[e.jsx("span",{className:"homepage-contact-link-label",children:a?"ईमेल:":"Email:"}),"vyansgroup@gmail.com"]}),e.jsxs("a",{href:"mailto:anshu@thevyans.com",className:"homepage-contact-link-row",children:[e.jsx("span",{className:"homepage-contact-link-label",children:a?"ईमेल:":"Email:"}),"anshu@thevyans.com"]})]})]}),e.jsx("footer",{className:"homepage-footer",children:F})]})}export{Y as default};
