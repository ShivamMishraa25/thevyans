import{j as e,r as i,L as U}from"./index-B53nC_gf.js";function L(n){try{const t=new URL(n);if(t.hostname==="youtu.be"){let c=`https://www.youtube.com/embed/${t.pathname.slice(1)}`;return t.search&&(c+=t.search),c}if(t.hostname.includes("youtube.com")){const a=t.searchParams,c=a.get("v");if(c){let o=`https://www.youtube.com/embed/${c}`;const l=[];return a.get("t")&&l.push(`start=${a.get("t").replace("s","")}`),a.get("si")&&l.push(`si=${a.get("si")}`),l.length&&(o+="?"+l.join("&")),o}}return n}catch{return n}}function P({title:n,date:t,author:a,content:c,images:o,videos:l,onImageClick:g}){return e.jsxs("article",{className:"homepage-post",children:[e.jsx("div",{className:"homepage-post-title",children:n}),e.jsxs("div",{className:"homepage-post-meta",children:[t," · ",a]}),e.jsx("div",{className:"homepage-post-content",children:c}),o&&o.length>0&&e.jsx("div",{className:"homepage-post-media",children:o.map((p,r)=>e.jsx("img",{src:p,alt:n+" "+(r+1),className:"homepage-post-image",onClick:()=>g(p),style:{cursor:"pointer"}},r))}),l&&l.length>0&&e.jsx("div",{className:"homepage-post-media",children:l.map((p,r)=>e.jsx("div",{className:"homepage-post-video-wrapper",children:e.jsx("iframe",{src:L(p),title:n+" video "+(r+1),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"homepage-post-video"})},r))})]})}function $(){const[n,t]=i.useState(!1),[a,c]=i.useState(!1),[o,l]=i.useState(null),[g,p]=i.useState([]),[r,f]=i.useState(!0),[u,v]=i.useState(""),[N,y]=i.useState(5),[x,b]=i.useState(null),j=a?{brand:"द व्यांस",about:"परिचय",contact:"संपर्क",login:"लॉगिन"}:{brand:"The Vyans",about:"About",contact:"Contact",login:"Login"},C=a?"संपर्क करें":"Contact Us",E=a?`© ${new Date().getFullYear()} द व्यांस. सर्वाधिकार सुरक्षित.`:`© ${new Date().getFullYear()} The Vyans. All rights reserved.`;i.useEffect(()=>{async function s(){f(!0),v("");try{const[m,d]=await Promise.all([fetch("https://thevyans.politebeach-89ca2b50.centralindia.azurecontainerapps.io/about"),fetch("https://thevyans.politebeach-89ca2b50.centralindia.azurecontainerapps.io/posts")]),h=await m.json(),k=await d.json();if(!m.ok)throw new Error(h.message||"Failed to fetch about");if(!d.ok)throw new Error(k.message||"Failed to fetch posts");l(h),p(k.sort((S,F)=>F._id.localeCompare(S._id)))}catch(m){v(m.message)}finally{f(!1)}}s()},[]);function w(){return e.jsxs("div",{className:"skeleton-fallback",children:[e.jsx("div",{className:"skeleton-header"}),e.jsx("div",{className:"skeleton-section"})]})}return e.jsxs("div",{className:"homepage-container",children:[e.jsxs("nav",{className:"homepage-nav",children:[e.jsx("div",{className:"homepage-brand",children:j.brand}),e.jsxs("div",{className:"homepage-nav-actions",children:[e.jsx("button",{className:"homepage-lang-btn",onClick:()=>c(s=>!s),children:a?"English":"हिन्दी"}),e.jsx("button",{className:"homepage-hamburger","aria-label":"Toggle navigation",onClick:()=>t(!n),children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",children:[e.jsx("rect",{y:"6",width:"28",height:"3",rx:"1.5",fill:"#fff"}),e.jsx("rect",{y:"13",width:"28",height:"3",rx:"1.5",fill:"#fff"}),e.jsx("rect",{y:"20",width:"28",height:"3",rx:"1.5",fill:"#fff"})]})})]}),e.jsxs("div",{className:`homepage-nav-links${n?" open":""}`,children:[e.jsx("a",{href:"#about",className:"homepage-nav-link",onClick:()=>t(!1),children:j.about}),e.jsx("a",{href:"#contact",className:"homepage-nav-link",onClick:()=>t(!1),children:j.contact}),e.jsx(U,{to:"/login",className:"homepage-nav-link",onClick:()=>t(!1),children:j.login})]})]}),e.jsx("section",{id:"about",className:"homepage-about-section",children:r?e.jsx(w,{}):u?e.jsx("div",{style:{color:"red"},children:u}):o?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:o.image,alt:"Profile",className:"homepage-about-img"}),e.jsxs("div",{className:"homepage-about-text",children:[e.jsx("h2",{children:a?"परिचय":"About Us"}),e.jsx("p",{children:a?o.hindiContent:o.englishContent})]})]}):null}),e.jsx("section",{id:"posts",className:"homepage-posts",children:r?e.jsx(w,{}):u?e.jsx("div",{style:{color:"red"},children:u}):g.length>0?e.jsxs(e.Fragment,{children:[g.slice(0,N).map((s,m)=>e.jsx(P,{title:s.title,date:s.date,author:s.author,content:s.content,images:s.images,videos:s.videos,onImageClick:d=>b(d)},s._id||m)),N<g.length&&e.jsx("button",{className:"homepage-more-posts-btn",onClick:()=>y(s=>s+5),style:{display:"block"},children:a?"और पोस्ट्स":"More Posts"})]}):e.jsx("div",{children:"No posts found."})}),x&&e.jsx("div",{className:"homepage-img-modal",onClick:()=>b(null),children:e.jsxs("div",{className:"homepage-img-modal-content",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:x,alt:"Fullscreen",className:"homepage-img-modal-img"}),e.jsx("button",{className:"homepage-img-modal-download",onClick:async()=>{try{const m=await(await fetch(x,{mode:"cors"})).blob(),d=window.URL.createObjectURL(m),h=document.createElement("a");h.href=d,h.download=x.split("/").pop()||"image.jpg",document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(d)}catch{alert("Failed to download image.")}},children:a?"डाउनलोड करें":"Download"}),e.jsx("button",{className:"homepage-img-modal-close",onClick:()=>b(null),children:"×"})]})}),e.jsxs("section",{id:"contact",className:"homepage-contact",children:[e.jsx("div",{className:"homepage-contact-title",children:C}),e.jsxs("form",{className:"homepage-contact-form",children:[e.jsx("input",{type:"text",placeholder:a?"आपका नाम":"Your Name",className:"homepage-input"}),e.jsx("input",{type:"email",placeholder:a?"आपका ईमेल":"Your Email",className:"homepage-input"}),e.jsx("textarea",{placeholder:a?"आपका संदेश":"Your Message",className:"homepage-input homepage-textarea"}),e.jsx("button",{type:"submit",className:"homepage-button",children:a?"संदेश भेजें":"Send Message"})]}),e.jsxs("div",{className:"homepage-contact-links-row",children:[e.jsxs("a",{href:"tel:+918299365307",className:"homepage-contact-link-row",children:[e.jsx("span",{className:"homepage-contact-link-label",children:a?"फोन:":"Phone:"}),"+91-8299365307"]}),e.jsxs("a",{href:"mailto:vyansgroup@gmail.com",className:"homepage-contact-link-row",children:[e.jsx("span",{className:"homepage-contact-link-label",children:a?"ईमेल:":"Email:"}),"vyansgroup@gmail.com"]}),e.jsxs("a",{href:"mailto:anshu@thevyans.com",className:"homepage-contact-link-row",children:[e.jsx("span",{className:"homepage-contact-link-label",children:a?"ईमेल:":"Email:"}),"anshu@thevyans.com"]})]})]}),e.jsx("footer",{className:"homepage-footer",children:E})]})}export{$ as default};
